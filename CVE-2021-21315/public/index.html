<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Service Monitor</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<h1>System Service Status Monitor</h1>
<label for="serviceName">Enter a service name (optional):</label>
<input type="text" id="serviceName" name="serviceName" placeholder="Service name">
<button onclick="fetchServiceStatus()">Check Status</button>

<h2>Service Statuses:</h2>
<table id="statusTable">
<thead>
    <tr>
        <th>Service Name</th>
        <th>Status</th>
        <th>PID</th>
        <th>CPU Usage</th>
        <th>Memory Usage</th>
    </tr>
</thead>
<tbody>
    <!-- Rows will be added here dynamically -->
</tbody>
</table>

<script>
    function fetchServiceStatus() {
        const serviceName = document.getElementById('serviceName').value;
        const url = serviceName ? `/monitor?service=${serviceName}` : '/monitor';
    
        fetch(url)
            .then(response => response.json())
            .then(data => {
                const tbody = document.getElementById('statusTable').getElementsByTagName('tbody')[0];
                tbody.innerHTML = '';
                data.services.forEach(service => {
                    const row = tbody.insertRow();
                    row.insertCell(0).textContent = service.service;
                    
                    const statusCell = row.insertCell(1);
                    statusCell.textContent = service.status;
                    statusCell.className = service.status === 'running' ? 'status-running' : 'status-stopped';
    
                    row.insertCell(2).textContent = service.pid;
                    row.insertCell(3).textContent = service.cpu + '%';
                    row.insertCell(4).textContent = service.mem + ' MB';
                });
            })
            .catch(error => console.error('Error fetching the service statuses:', error));
    }

window.onload = fetchServiceStatus;
</script>
</body>
</html>
